<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>我的聊天室</title>
	<link href="./css/bootstrap.min.css" rel="stylesheet">
	<link rel="shortcut icon" type="image/x-icon" href="./image/vim_shortcut.ico">
	<script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
	<script src="./js/jquery-1.11.3.min.js"></script>
	<script src="./js/bootstrap.min.js"></script>
<style type="text/css">
	
	.aa{
		margin-bottom: 8%;

	}
	#gg{
		/*background-color: #fff;*/
		/*box-shadow: 2px 2px 3px #ccc;*/
		font-size: 20px;
	}
	.Input{
		/*padding-left: 20%;
		padding-right: 20%;*/
		margin-bottom:5%;
	}
	.ccc{
		background-color: #666;
	border-top: 1px solid #ccc;
	padding-top: 20px;
	/*text-align: center;*/
	color: #eee;
	}
	body{
		font-family: "Helvetica Neue", Helvetica, Arial, "Microsoft Yahei UI", "Microsoft YaHei", SimHei, "\5B8B\4F53", simsun, sans-serif;
		font-size: 40px;
		background-color:#eee;
	}
	
</style>
</head>

<body >
	<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
  
   	<div class="navbar-header">
        <a class="navbar-brand" href="#">我的聊天室</a>
    </div>
      
  </div>
</nav>
	<nav class="navbar navbar-default navbar-fixed-bottom ccc">
  <div class="container">
  
    <!-- Collect the nav links, forms, and other content for toggling -->
   <!-- 	<div class="navbar-header">
        <a class="navbar-brand" href="#">我的聊天室</a>
    </div> -->
      <div class="collapse navbar-collapse" >
      <div class="input-group Input">
		<input type="text" class="form-control input-lg " placeholder="请输入内容" id="chat" onkeypress="bb()">
		<!-- <textarea class="form-control" rows="2" id="chat" onkeypress="bb()"></textarea> -->
		<span class="input-group-btn ">
        <button class="btn btn-default btn-lg btn-info" type="button" id="bb">Send</button>
      </span>

</div>
     
 	</div>
  </div><!-- /.container-fluid -->
</nav>




<div class="container-fluid aa">
		<div class="row">
			<div class="col-md-9">

				
					
						<ul class="media-list" id="gg">
							<li class="meida alert alert-success" role="alert">
								<div class="media-left">
									<img src="./image/face.jpg" width="50px" style="margin-top: 50%" 
									alt="头像" class="media-object img-circle ">
								</div>
								<div class="media-body ">


									
									<h2 class="meida-heading text-warning">小明 2015/04/27</h2>
									<!-- <h3> 2015/04/27</h3> -->
									<p >企鹅（学名：Spheniscidae）：有“海洋之舟”美称的企鹅是一种最古老的游禽，它们很可能在地球穿上冰甲之前，就已经在南极安家落户。全世界的企鹅共有17种，大多数都分布在南半球。主要生活在南半球，属于企鹅目，企鹅科。特征为不能飞翔；脚生于身体最下部，故呈直立姿势；趾间有蹼；跖行性（其他鸟类以趾着地）；前肢成鳍状；羽毛短，以减少摩擦和湍流；羽毛间存留一层空气，用以保温。背部黑色，腹部白色。各个种的主要区别在于头部色型和个体大小。</p>
								</div>
							
							</li>
							

						</ul>

				
			</div>
			<div class="col-md-3">

			</div>
	</div>
</div>





</body>
<script type="text/javascript">
	// function bb(){
	// 	$("#chat").val();
	// 	// alert($("#chat").val());
	// 	var ap="<li class='meida'><div class='media-left'><img src='./1.0.JP' alt='' class='media-object'>"+"</div><div class='media-body'><h6 class='meida-heading'></h6>"
	// 		+"<p class='alert alert-success' role='alert'>"
	// 		+$("#chat").val()+
	// 		"</p></div></li>";
	// 	$("#gg").append(ap);
	// 	var h = $(document).height()-$(window).height();
 //  $(document).scrollTop(h);
	// }



        $(function(){
			            var websocket;
			            var mydate = new Date();
			                websocket = new WebSocket("ws://127.0.0.1:8080/echo");
			            websocket.onopen = function (evnt) {
			                // $("#tou").html("链接服务器成功!")
			                // $("#one").append(evnt.data);
			                // websocket.send("##");
			            };
			            websocket.onmessage = function (evnt) {
			                // $("#msg").html($("#msg").html() + "<br/>" + evnt.data);
			                // $("#one").append(evnt.data);
			                var ap="<li class='meida alert alert-success' role='alert'><div class='media-left'><img src='./image/face.jpg' width='50px'"+
			                "style='margin-top: 40%' alt='' class='media-object img-circle '>"+
			             "</div><div class='media-body '><h2 class='meida-heading text-warning '>小明  "+mydate.toLocaleString()+"</h2>"+"<p ><xmp>"+evnt.data+"</xmp></p></div></li>";
					$("#gg").append(ap);
					var h = $(document).height()-$(window).height();
					$(document).scrollTop(h);

			            };
			            websocket.onerror = function (evnt) {
			            };
			            websocket.onclose = function (evnt) {
			                // $("#tou").html("与服务器断开了链接!")
			            }
			      $("#bb").bind("click", function() {
			      	
			      	var mytime=mydate.toLocaleTimeString(); //获取当前时间
					// alert(mydate.toLocaleString()); //获取日期与时间


              		 var ap="<li class='meida alert alert-danger' role='alert'><div class='media-left'><img src='./image/face.jpg' width='40px'"+
			                "style='margin-top: 50%' alt='' class='media-object img-circle '>"+
			             "</div><div class='media-body '><h2 class='meida-heading text-warning '>小明  "+mydate.toLocaleString()+"</h2>"+"<p ><xmp>"+$("#chat").val()+"</xmp></p></div></li>";
					$("#gg").append(ap);
					var h = $(document).height()-$(window).height();
					$(document).scrollTop(h);

                	var a=$("#chat").val();
                	 // alert(a);
                    websocket.send(a);
             
            });
        });
</script>
</html>